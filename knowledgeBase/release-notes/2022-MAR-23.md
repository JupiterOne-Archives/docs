# JupiterOne 23 March 2022 Release

## March 23, 2022

## New Features and Improvements
- If Compliance frameworks and controls are setup before instituing Policies and Procedures, controls are now mapped back to corresponding procedures within Policies automatically. 
- The last evaluation date for frameworks within Compliance is now shown, both at the framework level, and the requirement level.
- Failed evaluations of frameworks in Compliance are now display a message, calling attention to the frameworks which failed. 

## Integrations

### Azure
- Fixed an issue with the relationships being created between `azure_subnet` and `azure_vm` entities that was causing duplicate key errors.

### Google Cloud
- Updated several dependencies in the ingestion steps so that more steps will complete successfully when an integration job executes:
  - Decoupled `fetch-compute-region-disks` step from kms keys dependencies. This allows the Region Disks step to execute successfully even if kms keys steps are disabled.
  - Decoupled `fetch-memcache-instances` step from compute network dependencies. This allows the Memcache Instances step to execute successfully even if compute network steps are disabled.
  - Decoupled `fetch-dataproc-clusters` step from kms keys dependencies. This allows the Compute Dataproc Clusters step to execute successfully even if kms keys steps are disabled.
  - Decoupled `fetch-pubsub-topics` step from kms keys dependencies. This allows the PubSub Topics step to execute successfully even if kms keys steps are disabled.
  - Decoupled `fetch-redis-instances` step from compute network dependencies. This allows the Redis Instances step to execute successfully even if compute network steps are disabled.
  - Decoupled `fetch-app-engine-application` step from storage dependencies. This allows the App Engine Applications step to execute successfully even if storage steps are disabled.
  - Decoupled `fetch-compute-backend-buckets` step from storage dependencies. This allows the Compute Backend Buckets step to execute successfully even if storage steps are disabled.
  - Decoupled `fetch-private-ca-certificate-authorities` step from storage dependencies. This allows the CA Certificate Authorities step to execute successfully even if storage steps are disabled.
  - Decoupled `fetch-compute-images` step from kms keys dependencies. This allows the Compute Images step to execute successfully even if kms keys steps are disabled.
  - Decoupled `fetch-logging-project-sinks` step from storage dependencies. This allows the Logging Project Sinks step to execute successfully even if storage steps are disabled.
- Improved the accuracy of the boolean `google_storage_bucket.public` property by factoring in the projectâ€™s `storage.publicAccessPrevention` policy (see <https://cloud.google.com/storage/docs/public-access-prevention>). 
  - **Note:** this change requires an additional permission, `orgpolicy.policies.get`, be added to your custom access role.

### Jira
- Removed the raw data from the `jira_issue` entity to prevent ingestion failures.

### JupiterOne
- The JupiterOne integration now ingests `jupiterone_api_token` entities.  The properties include `displayName`, `createdOn`, and `expiresOn`.

### KnowBe4
- Added support for Canadian accounts.  The integration now allows for `us`, `eu`, and `ca` accounts.

### Microsoft 365
- Removed raw data from the following entities:
  - Detected Application Entity
  - Compliance Policy Entity

### Salesforce
- Added the `active` and `userType` properties to the `salesforce_user` entity

### Splunk
- Released version 1.3 of the [JupiterOne Add-on on Splunkbase](https://splunkbase.splunk.com/app/6138/).  This adds a Custom Command, allowing Splunk customers to execute a J1QL query and display the response in Splunk. 

### Veracode
The Veracode integration was rewritten to take advantage of the latest Veracode APIs and to use the current [JupiterOne Integration SDK](https://github.com/JupiterOne/integration-template).

The following entities are ingested:

| Veracode Entity Resource | Entity `_type`           | Entity `_class` |
| ------------------------ | ------------------------ | --------------- |
| Account                  | `veracode_account`       | `Account`       |
| Scan Type                | `veracode_scan`          | `Service`       |
| CWE                      | `cwe`                    | `Weakness`      |
| Vulnerability            | `veracode_vulnerability` | `Vulnerability` |
| Finding                  | `veracode_finding`       | `Finding`       |

The following relationships are created:

| From                     | Type           | To                       |
| ------------------------ | -------------- | ------------------------ |
| `veracode_account`       | **HAS**        | `veracode_scan`          |
| `veracode_scan`          | **IDENTIFIED** | `veracode_vulnerability` |
| `veracode_vulnerability` | **EXPLOITS**   | `cwe`                    |
| `veracode_finding`       | **IS**         | `veracode_vulnerability` |

The following mapped relationships are created:

| From                           | Type        | To                                                                                                                                                                                                 |
| ------------------------------ | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `CodeRepo/Project/Application` | **HAS/HAD** | `veracode_finding` **Note:** This is mapped automatically only when the name of the Veracode Application the finding belongs to matches the name of a CodeRepo/Project/Application in JupiterOne. |
